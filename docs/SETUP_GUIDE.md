# ุฏููู ุงูุฅุนุฏุงุฏ ุงูุณุฑูุน - Telegram Phone Lookup Bot

## ๐ ุฅุนุฏุงุฏ ุณุฑูุน (5 ุฏูุงุฆู)

### ุงููุชุทูุจุงุช
- Node.js 20.x
- MySQL 8.0
- ุญุณุงุจ Telegram Bot

---

## ุฎุทูุฉ 1: ุฅูุดุงุก ููุงุนุฏ ุงูุจูุงูุงุช

### ุฅูุดุงุก ุงูููุงุนุฏ ูู MySQL

```bash
# ุงูุฏุฎูู ุฅูู MySQL
mysql -u root -p
```

```sql
-- ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช VIP
CREATE DATABASE telegram_bot_vip CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช Regular
CREATE DATABASE telegram_bot_regular CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ุฅูุดุงุก ูุณุชุฎุฏู
CREATE USER 'bot_user'@'localhost' IDENTIFIED BY 'ูููุฉ_ูุฑูุฑ_ูููุฉ';

-- ููุญ ุงูุตูุงุญูุงุช
GRANT ALL PRIVILEGES ON telegram_bot_vip.* TO 'bot_user'@'localhost';
GRANT ALL PRIVILEGES ON telegram_bot_regular.* TO 'bot_user'@'localhost';

FLUSH PRIVILEGES;
EXIT;
```

---

## ุฎุทูุฉ 2: ุชุดุบูู ุณูุฑูุจุช ุงูุฅุนุฏุงุฏ

```bash
# ุชุซุจูุช ุงูููุชุจุงุช ุงูุฃุณุงุณูุฉ ุฃููุงู
npm install mysql2

# ุชุดุบูู ุณูุฑูุจุช ุงูุฅุนุฏุงุฏ
node setup.js
```

### ูุงุฐุง ุณููุนู ุงูุณูุฑูุจุชุ
1. โ ูุทูุจ ููู ูุนูููุงุช ุจูุช Telegram
2. โ ูุทูุจ ูุนูููุงุช ูุงุนุฏุชู ุงูุจูุงูุงุช (VIP ู Regular)
3. โ ูุทูุจ API Keys ููู AI (ุงุฎุชูุงุฑู)
4. โ ููุดุฆ ููู `.env` ุชููุงุฆูุงู
5. โ ููุดุฆ ุงูุฌุฏุงูู ูู ุงููุงุนุฏุชูู
6. โ ูุณูุญ ูู ุจุฅุถุงูุฉ ูุณุชุฎุฏููู VIP
7. โ ูุซุจุช ูู ุงูููุชุจุงุช ุงููุทููุจุฉ

---

## ุฎุทูุฉ 3: ุชุดุบูู ุงูุจูุช

```bash
# ุงูุชุดุบูู ุงูุนุงุฏู
npm run dev

# ุฃู ุจุงุณุชุฎุฏุงู PM2
pm2 start ecosystem.config.js
```

---

## ๐ ุจููุฉ ููุงุนุฏ ุงูุจูุงูุงุช

### ูุงุนุฏุฉ VIP (`telegram_bot_vip`)
ุชุญุชูู ุนูู:
- `facebook_accounts` - ุจูุงูุงุช ููุณุจูู ุงููุชูุฏูุฉ
- `contacts` - ุฌูุงุช ุงุชุตุงู ููุตูุฉ
- `user_subscriptions` - ุฅุฏุงุฑุฉ ุงููุดุชุฑููู VIP

### ูุงุนุฏุฉ Regular (`telegram_bot_regular`)
ุชุญุชูู ุนูู:
- `facebook_accounts` - ุจูุงูุงุช ููุณุจูู ุนุงุฏูุฉ
- `contacts` - ุฌูุงุช ุงุชุตุงู ุนุงุฏูุฉ

---

## ๐ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ุงููููุฒูู (VIP)

### ุงูุทุฑููุฉ 1: ุฃุซูุงุก ุงูุฅุนุฏุงุฏ
ุณูุฑูุจุช ุงูู setup ุณูุณุฃูู ุฅุฐุง ููุช ุชุฑูุฏ ุฅุถุงูุฉ ูุณุชุฎุฏููู VIP

### ุงูุทุฑููุฉ 2: ูู ููู vip-users.json

```json
[
  {
    "telegram_user_id": 123456789,
    "username": "username",
    "subscription_type": "vip",
    "notes": "ููุงุญุธุงุช",
    "added_at": "2025-11-13T00:00:00.000Z"
  }
]
```

### ุงูุทุฑููุฉ 3: ูุจุงุดุฑุฉ ูู MySQL

```sql
-- ุงูุฏุฎูู ุฅูู ูุงุนุฏุฉ VIP
USE telegram_bot_vip;

-- ุฅุถุงูุฉ ูุณุชุฎุฏู VIP
INSERT INTO user_subscriptions (telegram_user_id, username, subscription_type, is_active)
VALUES (987654321, 'new_vip_user', 'vip', TRUE);

-- ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู VIP
SELECT * FROM user_subscriptions WHERE subscription_type = 'vip' AND is_active = TRUE;

-- ุชุนุทูู ูุณุชุฎุฏู VIP
UPDATE user_subscriptions SET is_active = FALSE WHERE telegram_user_id = 123456789;
```

---

## ๐ ููู ูุนูู ุงููุธุงูุ

### ุนูุฏ ุงุณุชูุงู ุฑุณุงูุฉ ูู ูุณุชุฎุฏู:

1. **ุงูุชุญูู ูู ููุน ุงููุณุชุฎุฏู**
   - ุงูุจูุช ูุชุญูู ูู ุฌุฏูู `user_subscriptions` ูู ูุงุนุฏุฉ VIP
   - ุฅุฐุง ููุฌูุฏ ูู `is_active = TRUE` โ ูุณุชุฎุฏู VIP
   - ุฅุฐุง ุบูุฑ ููุฌูุฏ โ ูุณุชุฎุฏู ุนุงุฏู

2. **ุงูุจุญุซ ูู ุงููุงุนุฏุฉ ุงูููุงุณุจุฉ**
   - ูุณุชุฎุฏู VIP โ ูุจุญุซ ูู `telegram_bot_vip`
   - ูุณุชุฎุฏู ุนุงุฏู โ ูุจุญุซ ูู `telegram_bot_regular`

3. **ุฅุฑุฌุงุน ุงููุชุงุฆุฌ**
   - VIP: ูุญุตู ุนูู ุจูุงูุงุช ููุตูุฉ
   - ุนุงุฏู: ูุญุตู ุนูู ุจูุงูุงุช ุฃุณุงุณูุฉ

---

## ๐ ูููู ุงููููุงุช

```
telegram-bot/
โโโ setup.js                      # ุณูุฑูุจุช ุงูุฅุนุฏุงุฏ ุงูุณูู โญ
โโโ vip-users.json               # ูุงุฆูุฉ ุงููุณุชุฎุฏููู VIP
โโโ .env                         # ูุชุบูุฑุงุช ุงูุจูุฆุฉ (ูููุดุฃ ุชููุงุฆูุงู)
โโโ .env.example                 # ูุซุงู ูููุชุบูุฑุงุช
โโโ src/
โ   โโโ mastra/
โ       โโโ config/
โ       โ   โโโ database.ts      # ุฅุนุฏุงุฏุงุช ููุงุนุฏ ุงูุจูุงูุงุช
โ       โโโ tools/
โ           โโโ phoneLookupTool.ts  # ุฃุฏุงุฉ ุงูุจุญุซ ุงููุญุฏุซุฉ
โโโ docs/
โ   โโโ SETUP_GUIDE.md          # ูุฐุง ุงูููู
โ   โโโ UBUNTU_DEPLOYMENT_GUIDE.md  # ุฏููู ุงููุดุฑ ุงููุงูู
โโโ ecosystem.config.js          # ุฅุนุฏุงุฏุงุช PM2
```

---

## ๐ฏ ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุฅุถุงูุฉ ุจูุงูุงุช ูููุณุชุฎุฏููู VIP

```sql
USE telegram_bot_vip;

INSERT INTO facebook_accounts (facebook_id, name, phone, email, location, job)
VALUES 
  ('fb123', 'ุฃุญูุฏ ูุญูุฏ', '+201234567890', 'ahmad@email.com', 'ุงููุงูุฑุฉ', 'ูููุฏุณ'),
  ('fb456', 'ุณุงุฑุฉ ุนูู', '+201098765432', 'sara@email.com', 'ุงูุฅุณููุฏุฑูุฉ', 'ุทุจูุจุฉ');

INSERT INTO contacts (name, phone, address)
VALUES 
  ('ูุญูุฏ ุญุณู', '+201111111111', 'ุดุงุฑุน ุงูุฌูููุฑูุฉุ ุงููุงูุฑุฉ'),
  ('ูุงุทูุฉ ุฃุญูุฏ', '+201222222222', 'ุดุงุฑุน ุงููุตุฑุ ุงูุฌูุฒุฉ');
```

### ูุซุงู 2: ุฅุถุงูุฉ ุจูุงูุงุช ูููุณุชุฎุฏููู ุงูุนุงุฏููู

```sql
USE telegram_bot_regular;

INSERT INTO facebook_accounts (name, phone)
VALUES 
  ('ุฎุงูุฏ ูุญููุฏ', '+201555555555'),
  ('ูููู ุญุณูู', '+201666666666');

INSERT INTO contacts (name, phone)
VALUES 
  ('ุนูุฑ ุณุนูุฏ', '+201777777777'),
  ('ููู ูุฑูู', '+201888888888');
```

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุจูุช ูุง ูุชุนุฑู ุนูู ุงููุณุชุฎุฏููู VIP

**ุงูุญู:**
```sql
-- ุชุญูู ูู ุฌุฏูู user_subscriptions
USE telegram_bot_vip;
SELECT * FROM user_subscriptions;

-- ุชุฃูุฏ ูู ูุฌูุฏ ุงูุณุฌู ูุฃู is_active = TRUE
UPDATE user_subscriptions 
SET is_active = TRUE 
WHERE telegram_user_id = YOUR_USER_ID;
```

### ุงููุดููุฉ: ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุญู:**
```bash
# ุชุญูู ูู ูุนูููุงุช ุงูุงุชุตุงู ูู .env
cat .env | grep DB

# ุงุฎุชุจุฑ ุงูุงุชุตุงู
mysql -u bot_user -p -h localhost telegram_bot_vip
```

### ุงููุดููุฉ: ุงูุฌุฏุงูู ุบูุฑ ููุฌูุฏุฉ

**ุงูุญู:**
```bash
# ุฃุนุฏ ุชุดุบูู setup ูุน ุฎูุงุฑ ุฅูุดุงุก ุงูุฌุฏุงูู
node setup.js
```

---

## ๐ ุงูุญุตูู ุนูู Telegram User ID

### ูู ุงูุจูุช ููุณู:
ุฃุฑุณู `/start` ููุจูุช ูุณูุธูุฑ ูู User ID ุงูุฎุงุต ุจู

### ุจุงุณุชุฎุฏุงู @userinfobot:
1. ุงุจุญุซ ุนู `@userinfobot` ูู Telegram
2. ุฃุฑุณู ูู `/start`
3. ุณูุฑุณู ูู ูุนูููุงุชู ุจูุง ูููุง User ID

---

## ๐ ูููุฒุงุช ุงููุธุงู

โ **ุณูููุฉ ุงูุฅุนุฏุงุฏ**: ุณูุฑูุจุช ูุงุญุฏ ูุฅุนุฏุงุฏ ูู ุดูุก  
โ **ูุงุนุฏุชู ุจูุงูุงุช ูููุตูุชูู**: VIP ู Regular  
โ **ุฅุฏุงุฑุฉ ุณููุฉ ููู VIP**: ูู ุฎูุงู JSON ุฃู MySQL  
โ **ุจุญุซ ุฐูู**: ูุฏุนู ุฌููุน ุตูุบ ุงูุฃุฑูุงู  
โ **ุฃูุงู ุนุงูู**: ูู ูุณุชุฎุฏู ูุฑู ุจูุงูุงุชู ููุท  
โ **ูุงุจู ููุชูุณุน**: ุณูู ุฅุถุงูุฉ ุฌุฏุงูู ููููุฒุงุช ุฌุฏูุฏุฉ  

---

## ๐ ุงููุฒูุฏ ูู ุงููุนูููุงุช

- **ูููุดุฑ ุนูู ุณูุฑูุฑ Ubuntu**: ุฑุงุฌุน `docs/UBUNTU_DEPLOYMENT_GUIDE.md`
- **ููุชุฎุตูุต**: ุฑุงุฌุน ุงูููุฏ ูู `src/mastra/`
- **ููุฏุนู ุงูููู**: ุงูุชุญ Issue ุนูู GitHub

---

**ุขุฎุฑ ุชุญุฏูุซ:** ููููุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 1.0
